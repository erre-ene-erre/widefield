(function(){"use strict";var S={props:{initialTab:String,tabs:Array},data(){return{activeTab:this.initialTab}},computed:{tabPanelSlotName(){return`tab-panel-${this.activeTab}`}},methods:{tabHeadSlotName(t){return`tab-head-${t}`},switchTab(t){this.activeTab=t}}},x=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"card"},[e("header",{staticClass:"card-header"},[e("ul",{staticClass:"tab-heads"},t._l(t.tabs,function(n){return e("li",{key:n,staticClass:"tab-head",class:{"tab-head--active":t.activeTab===n},on:{click:function(s){return t.switchTab(n)}}},[t._t(t.tabHeadSlotName(n),function(){return[t._v(t._s(n)+" ")]})],2)}),0)]),e("main",{staticClass:"card-body"},[e("div",{staticClass:"tab-panel"},[t._t(t.tabPanelSlotName)],2)])])},T=[],Et="";function i(t,a,e,n,s,o,u,Ft){var r=typeof t=="function"?t.options:t;a&&(r.render=a,r.staticRenderFns=e,r._compiled=!0),n&&(r.functional=!0),o&&(r._scopeId="data-v-"+o);var c;if(u?(c=function(l){l=l||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,!l&&typeof __VUE_SSR_CONTEXT__!="undefined"&&(l=__VUE_SSR_CONTEXT__),s&&s.call(this,l),l&&l._registeredComponents&&l._registeredComponents.add(u)},r._ssrRegister=c):s&&(c=Ft?function(){s.call(this,(r.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(r.functional){r._injectStyles=c;var Rt=r.render;r.render=function(Mt,C){return c.call(C),Rt(Mt,C)}}else{var g=r.beforeCreate;r.beforeCreate=g?[].concat(g,c):[c]}return{exports:t,options:r}}const _={};var k=i(S,x,T,!1,w,null,null,null);function w(t){for(let a in _)this[a]=_[a]}var D=function(){return k.exports}(),F={data(){return{abandoned:null}},computed:{abandonedCount(){return this.abandoned?this.abandoned.length:"Loading..."}},async created(){let t=await this.$api.get("snipcart/carts/abandoned");this.abandoned=t.items}},R=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"k-snipcart-vital"},[e("h3",[t._v("Abandonded Carts")]),e("span",[t._v(t._s(t.abandonedCount))])])},M=[];const d={};var E=i(F,R,M,!1,j,null,null,null);function j(t){for(let a in d)this[a]=d[a]}var A=function(){return E.exports}(),N={data(){return{totalSales:null}},computed:{salesCount(){return this.totalSales?this.totalSales:"Loading..."}},async created(){let a=(await this.$api.get("snipcart/orders")).items.reduce((e,n)=>e+n.finalGrandTotal,0).toFixed(2);this.totalSales=a}},I=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"k-snipcart-vital"},[e("h3",[t._v("Total Sales")]),e("span",[t._v(t._s(t.salesCount))])])},O=[];const v={};var P=i(N,I,O,!1,L,null,null,null);function L(t){for(let a in v)this[a]=v[a]}var U=function(){return P.exports}(),V={name:"popularItem",data(){return{popularItem:void 0,errors:[]}},computed:{popularCount(){return this.popularItem?this.popularItem:"Loading..."}},async created(){try{let e=(await this.$api.get("snipcart/orders",{pretty:!0})).items.reduce((s,o)=>s.concat(o.items),[]).map(({name:s})=>s).reduce((s,o)=>{const u=s[o]||0;return s[o]=u+1,s},{}),n=Object.keys(e).reduce((s,o)=>e[s]>e[o]?s:o);this.popularItem=n}catch(t){this.errors.push(t)}}},B=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"k-snipcart-vital"},[e("h3",[t._v("Most Popular")]),e("span",[t._v(t._s(t.popularCount))])])},G=[];const p={};var H=i(V,B,G,!1,X,null,null,null);function X(t){for(let a in p)this[a]=p[a]}var Y=function(){return H.exports}(),q={props:{name:String,columns:Object,options:Array,rows:{type:Array,default(){return[]}},empty:String},data(){return{tablecolumns:{invoiceNumber:{label:"Code",type:"text"},date:{label:"Date",type:"text"},status:{label:"Status",type:"text"},total:{label:"Total",type:"text"},shippingAddressCountry:{label:"Ship to",type:"text"}},orders:[]}},async created(){let a=(await this.$api.get("snipcart/orders?limit=500")).items.map(function(e){let n=new Date(Date.parse(e.completionDate)),s=("0"+n.getDate()).slice(-2)+"/"+("0"+(n.getMonth()+1)).slice(-2)+"/"+n.getFullYear();return{invoiceNumber:e.invoiceNumber,date:s,status:e.status,total:e.finalGrandTotal,shippingAddressCountry:e.shippingAddressCountry}});this.orders=a}},z=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.orders.length?e("k-table",{attrs:{columns:t.tablecolumns,rows:t.orders}}):t._e()],1)},W=[],jt="";const h={};var J=i(q,z,W,!1,K,null,null,null);function K(t){for(let a in h)this[a]=h[a]}var Q=function(){return J.exports}(),Z={name:"Vitals",components:{abandoned:A,salestotal:U,popular:Y,orders:Q}},tt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("k-view",{staticClass:"k-snipcart-view"},[e("k-grid",{staticClass:"k-snipcart-vitals",attrs:{gutter:"medium"}},[e("k-column",{attrs:{width:"1/3"}},[e("salestotal")],1),e("k-column",{attrs:{width:"1/3"}},[e("popular")],1),e("k-column",{attrs:{width:"1/3"}},[e("abandoned")],1),e("k-column",{attrs:{width:"1/1"}},[e("orders")],1)],1)],1)},et=[];const f={};var at=i(Z,tt,et,!1,st,null,null,null);function st(t){for(let a in f)this[a]=f[a]}var nt=function(){return at.exports}(),rt={props:{name:String,columns:Object,options:Array,rows:{type:Array,default(){return[]}},empty:String},data(){return{tablecolumns:{discname:{label:"Name",type:"text"},code:{label:"Code",type:"text"},expires:{label:"Expires",type:"text"},uses:{label:"Uses",type:"text"}},discounts:[]}},async created(){let a=(await this.$api.get("snipcart/discounts")).map(function(e){let n=new Date(Date.parse(e.expires)),s=("0"+n.getDate()).slice(-2)+"/"+("0"+(n.getMonth()+1)).slice(-2)+"/"+n.getFullYear();return{discname:e.discname,code:e.code,uses:e.numberOfUsages,expires:s}});this.discounts=a}},it=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[t.discounts.length?e("k-table",{attrs:{columns:t.tablecolumns,rows:t.discounts}}):t._e()],1)},ot=[],At="";const m={};var lt=i(rt,it,ot,!1,ct,null,null,null);function ct(t){for(let a in m)this[a]=m[a]}var ut=function(){return lt.exports}(),_t={name:"Discounts",components:{discounts:ut}},dt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("k-grid",{staticClass:"k-snipcart-vitals",attrs:{gutter:"medium"}},[e("k-column",{attrs:{width:"1/1"}},[e("discounts")],1)],1)],1)},vt=[];const $={};var pt=i(_t,dt,vt,!1,ht,null,null,null);function ht(t){for(let a in $)this[a]=$[a]}var ft=function(){return pt.exports}(),mt={name:"Dashboard",components:{vitals:nt,discounts:ft,TabCard:D},data(){return{initialTab:"dashboard",tabs:["dashboard","discounts"]}}},$t=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("k-inside",[e("k-view",{staticClass:"k-snipcart-view"},[e("TabCard",{attrs:{tabs:t.tabs,initialTab:t.initialTab}},[e("template",{slot:"tab-head-dashboard"},[t._v(" Dashboard ")]),e("template",{slot:"tab-panel-dashboard"},[e("vitals")],1),e("template",{slot:"tab-head-discounts"},[t._v(" Discounts ")]),e("template",{slot:"tab-panel-discounts"},[e("discounts")],1)],2)],1)],1)},bt=[],Nt="";const b={};var yt=i(mt,$t,bt,!1,gt,null,null,null);function gt(t){for(let a in b)this[a]=b[a]}var Ct=function(){return yt.exports}(),St={props:{label:String,value:String,disabled:Boolean,required:Boolean,value:String},data(){return{totalSales:null,productID:this.$store.getters["content/values"]().productid}},computed:{salesCount(){return this.totalSales?this.totalSales:"Loading..."}},async created(){let t=await this.$api.get("snipcart/products/"+this.productID);t===void 0||t.length==0?this.totalSales=0:this.totalSales=t.statistics.totalSales.toFixed(2)}},xt=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"k-snipcart-product-total"},[e("div",{staticClass:"k-snipcart-vital"},[e("h3",[t._v("Total Sales")]),e("span",[t._v(t._s(t.salesCount))])])])},Tt=[];const y={};var kt=i(St,xt,Tt,!1,wt,null,null,null);function wt(t){for(let a in y)this[a]=y[a]}var Dt=function(){return kt.exports}();panel.plugin("hashandsalt/snipcart",{components:{dash:Ct},fields:{productTotal:Dt}})})();
